/*
 * Copyright (c) 2020 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>



/ { 
    behaviors {
		tp: behavior_tap_preferred {
			compatible = "zmk,behavior-hold-tap";
			label = "MOD_TAP";
			#binding-cells = <2>;
			flavor = "tap-preferred";
			tapping-term-ms = <150>;
			bindings = <&kp>, <&kp>;
		};
	};

    keymap {
        compatible = "zmk,keymap";

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        mac_base_layer {
// ---------------------------------------------------------------------------------------------------------------------
// 	|  `~   |       |       |       |       |       |       /*    */       |       |       |       |       |       |  cfg  |
// 	|  TAB  |   Q   |   W   |   E   |   R   |   T   |       /*    */       |   Y   |   U   |   I   |   O   |   P   |  mac  |
// 	|  ESC  |   A   |   S   |   D   |   F   |   G   |       /*    */       |   H   |   J   |   K   |   L   |   :   |   '   |
// 	| SFT/| |   Z   |   X   |   C   |   V   |   B   |       /*    */       |   N   |   M   |   ,   |   .   |   /   | SFT   |
// 	                |  GUI  |  ALT  |  CTRL | ENT/np|  lwr  /*    */ rs/BSP|  SPC  |  DEL  |       | Zmute |      
            bindings = <
	&kp GRAVE		&trans		&trans		&trans		&trans			&trans			/**/			&trans		&trans		&trans		&trans		&trans		&sl 4
	&kp TAB			&kp Q		&kp W		&kp E		&kp R			&kp T			/**/			&kp Y		&kp U		&kp I		&kp O		&kp P		&to 5 
	&kp ESC			&kp A		&kp S		&kp D		&kp F			&kp G			/**/			&kp H		&kp J		&kp K		&kp L		&kp SEMI	&kp SQT
	&mt LSHFT PIPE	 	&kp Z		&kp X		&kp C		&kp V			&kp B		&kp C_PP/**/	&trans 		&kp N		&kp M		&kp COMMA	&kp DOT		&kp FSLH	&kp RSHIFT
						&kp LCTRL	&kp LALT	&kp LGUI		&lt 3 RET	&mo 1	/**/	&lt 2 BSPC	&kp SPACE	&kp DEL		&trans 		&kp LS(LG(A))
            >;
            sensor-bindings = <&inc_dec_kp C_NEXT C_PREV &inc_dec_kp C_VOL_UP C_VOL_DN>;
        };

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        mac_lower_layer {
// ---------------------------------------------------------------------------------------------------------------------
// 	|       |  F1   |  F2   |  F3   |  F4   |  F5   |       /*    */        |  F6   |  F7   |  F8   |  F9   |  F10  |  F11  |
// 	|   `   |   £   |   $   |   _   |   [   |   ]   |       /*    */        |       |   ?   |   %   |       |       |  F12  |
// 	|       |   !   |   "   |   -   |   {   |   }   |       /*    */        |       |   =   |   +   |   *   |   @   |   #   |
// 	|   \   |       |       |   \   |   (   |   )   |       /*    */        |       |   &   |   <   |   >   |       |   ~   |
// 	                |       |       |       |       |       /*    */        | BspWd |       |       |       |      
            bindings = <
	&trans		&kp F1		&kp F2		&kp F3		&kp F4		&kp F5			/**/			&kp F6		&kp F7		&kp F8		&kp F9		&kp F10		&kp F11
	&kp GRAVE	&kp HASH	&kp DLLR	&kp UNDER	&kp LBKT	&kp RBKT		/**/			&trans		&kp QMARK	&kp PRCNT	&trans		&trans		&kp F12
	&trans		&kp EXCL	&kp AT		&kp MINUS	&kp LBRC	&kp RBRC		/**/			&trans		&kp EQUAL	&kp PLUS	&kp STAR	&kp DQT		&kp LA(N3)
	&kp BSLH	&trans		&trans		&kp BSLH	&kp LPAR	&kp RPAR	&trans	/**/	&trans		&trans		&kp AMPS	&kp LT		&kp GT		&trans		&kp TILDE
					&trans		&trans		&trans		&trans		&trans	/**/	&kp LA(BSPC)	&kp DEL		&trans		&trans		&trans
            >;
            sensor-bindings = <&inc_dec_kp C_NEXT C_PREV &inc_dec_kp C_VOL_UP C_VOL_DN>;
        };

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        mac_raise_layer {
// ---------------------------------------------------------------------------------------------------------------------
// 	|       |       |       |       |       |       |       /*    */        |       |       |       |       |       |       |
// 	|       |       |       |       |       |       |       /*    */        |  C+b  | PWord | Nword |       |       |       |
// 	|       | UNDO  |  CUT  | COPY  | PASTE | CAPS  |       /*    */        |   <   |   v   |   ^   |   >   |       |       |
// 	|       |       |       |       |       |       | MUTE  /*    */        |  C+f  | HOME  |  END  |       |       |       |
// 	                | INS   | PRT   |       | CMDENT|       /*    */        |       |       |       |       |      
            bindings = <
	&trans		&trans		&trans		&trans		&trans		&trans				/**/			&trans		&trans		&trans		&trans		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans				/**/			&kp LC(B)	&kp LA(LEFT)	&kp LA(RIGHT)	&trans		&trans		&trans
	&trans		&kp LG(Z)	&kp LG(X)	&kp LG(C)	&kp LG(V)	&kp CLCK			/**/			&kp LEFT	&kp DOWN	&kp UP		&kp RIGHT	&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans		&kp K_MUTE	/**/	&trans		&kp LC(F)	&kp HOME	&kp END		&trans		&trans		&trans
					&kp INS		&kp LS(LG(LC(N4))) &trans	&kp LG(RET)	&trans		/**/	&trans		&trans		&trans		&trans		&trans
            >;
            sensor-bindings = <&inc_dec_kp C_VOL_UP C_VOL_DN>;
        };

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        mac_np_layer {
// ---------------------------------------------------------------------------------------------------------------------
// 	|       |       |       |       |       |       |       /*    */        |       |       |       |       |       |       |
// 	|       |       |       |       |       |       |       /*    */        |       |   7   |   8   |   9   |       |       |
// 	|       |       |       |       |       |       |       /*    */        |       |   4   |   5   |   6   |       |       |
// 	|       |       |       |       |       |       |       /*    */        |       |   1   |   2   |   3   |       |       |
// 	                |       |       |       |       |       /*    */        |   0   |       |       |       |      
            bindings = <
	&trans		&trans		&trans		&trans		&trans		&trans			/**/			&trans		&trans		&trans		&trans		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans			/**/			&trans		&kp N7		&kp N8		&kp N9		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans			/**/			&trans		&kp N4		&kp N5		&kp N6		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans		&trans	/**/	&trans		&trans		&kp N1		&kp N2		&kp N3		&trans		&trans
					&trans		&trans		&trans		&trans		&trans	/**/	&trans		&kp N0		&trans		&trans		&trans
            >;
            sensor-bindings = <&inc_dec_kp C_NEXT C_PREV &inc_dec_kp C_VOL_UP C_VOL_DN>;
        };

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        base_layer {
// ---------------------------------------------------------------------------------------------------------------------
// 	|  `~   |       |       |       |       |       |       /*    */       |       |       |       |       |       |  cfg  |
// 	|  TAB  |   Q   |   W   |   E   |   R   |   T   |       /*    */       |   Y   |   U   |   I   |   O   |   P   |  mac  |
// 	|  ESC  |   A   |   S   |   D   |   F   |   G   |       /*    */       |   H   |   J   |   K   |   L   |   :   |   '   |
// 	| SFT/| |   Z   |   X   |   C   |   V   |   B   |       /*    */       |   N   |   M   |   ,   |   .   |   /   | SFT   |
// 	                |  GUI  |  ALT  |  CTRL | ENT/np|  lwr  /*    */ rs/BSP|  SPC  |       |       | Zmute |      
            bindings = <
	&kp GRAVE		&trans		&trans		&trans		&trans			&trans			/**/			&trans		&trans		&trans		&trans		&trans		&sl 4
	&kp TAB			&kp Q		&kp W		&kp E		&kp R			&kp T			/**/			&kp Y		&kp U		&kp I		&kp O		&kp P		&to 0 
	&kp ESC			&kp A		&kp S		&kp D		&kp F			&kp G			/**/			&kp H		&kp J		&kp K		&kp L		&kp SEMI	&kp SQT
	&mt LSHFT PIPE2 	&kp Z		&kp X		&kp C		&kp V			&kp B		&kp C_PP/**/	&trans 		&kp N		&kp M		&kp COMMA	&kp DOT		&kp FSLH	&kp RSHIFT
						&kp LGUI	&kp LALT	&kp LCTRL		&lt 8 RET	&mo 6	/**/	&lt 7 BSPC	&kp SPACE	&trans		&trans 		&kp LA(A)
            >;
            sensor-bindings = <&inc_dec_kp C_NEXT C_PREV &inc_dec_kp C_VOL_UP C_VOL_DN>;
        };

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        lower_layer {
// ---------------------------------------------------------------------------------------------------------------------
// 	|       |  F1   |  F2   |  F3   |  F4   |  F5   |       /*    */        |  F6   |  F7   |  F8   |  F9   |  F10  |  F11  |
// 	|   `   |   £   |   $   |   _   |   [   |   ]   |       /*    */        |       |   ?   |   %   |       |       |  F12  |
// 	|       |   !   |   "   |   -   |   {   |   }   |       /*    */        |       |   =   |   +   |   *   |   @   |   #   |
// 	|       |       |       |   \   |   (   |   )   |       /*    */        |       |   &   |   <   |   >   |       |   ~   |
// 	                |       |       |       |       |       /*    */        | BspWd |       |       |       |      
            bindings = <
	&trans		&kp F1		&kp F2		&kp F3		&kp F4		&kp F5			/**/			&kp F6		&kp F7		&kp F8		&kp F9		&kp F10		&kp F11
	&kp GRAVE	&kp HASH	&kp DLLR	&kp UNDER	&kp LBKT	&kp RBKT		/**/			&trans		&kp QMARK	&kp PRCNT	&trans		&trans		&kp F12
	&trans		&kp EXCL	&kp AT		&kp MINUS	&kp LBRC	&kp RBRC		/**/			&trans		&kp EQUAL	&kp PLUS	&kp STAR	&kp DQT		&kp NON_US_HASH
	&trans		&trans		&trans		&kp NON_US_BSLH	&kp LPAR	&kp RPAR		/**/	&trans		&trans		&kp AMPS	&kp LT		&kp GT		&trans		&kp TILDE2
					&trans		&trans		&trans		&trans		&trans	/**/	&kp LC(BSPC)	&trans		&trans		&trans		&trans
            >;
            sensor-bindings = <&inc_dec_kp C_NEXT C_PREV &inc_dec_kp C_VOL_UP C_VOL_DN>;
        };

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        raise_layer {
// ---------------------------------------------------------------------------------------------------------------------
// 	|       |       |       |       |       |       |       /*    */        |       |       |       |       |       |       |
// 	|       |       |       |       |       |       |       /*    */        |  C+b  | PWord | Nword | PG UP |       |       |
// 	|       | UNDO  |  CUT  | COPY  | PASTE | CAPS  |       /*    */        |   <   |   v   |   ^   |   >   |       |       |
// 	|       |       |       |       |       |       | MUTE  /*    */        |  C+f  | HOME  |  END  | PG DN |       |       |
// 	                | INS   | PRT   |       | CMDENT|       /*    */        |       |       |       |       |      
            bindings = <
	&trans		&trans		&trans		&trans		&trans		&trans				/**/			&trans		&trans		&trans		&trans		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans				/**/			&kp LC(B)	&kp LC(LEFT)	&kp LC(RIGHT)	&kp PG_UP	&trans		&trans
	&trans		&kp LC(Z)	&kp LC(X)	&kp LC(C)	&kp LC(V)	&kp CLCK			/**/			&kp LEFT	&kp DOWN	&kp UP		&kp RIGHT	&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans		&kp C_MUTE	/**/	&trans		&kp LC(F)	&kp HOME	&kp END		&kp PG_DN	&trans		&trans
					&kp INS		&kp PSCRN	&trans		&kp LC(RET)	&trans		/**/	&trans		&trans		&trans		&trans		&trans
            >;
            sensor-bindings = <&inc_dec_kp C_VOL_UP C_VOL_DN>;
        };

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        np_layer {
// ---------------------------------------------------------------------------------------------------------------------
// 	|       |       |       |       |       |       |       /*    */        |       |       |       |       |       |       |
// 	|       |       |       |       |       |       |       /*    */        |       |   7   |   8   |   9   |       |       |
// 	|       |       |       |       |       |       |       /*    */        |       |   4   |   5   |   6   |       |       |
// 	|       |       |       |       |       |       |       /*    */        |       |   1   |   2   |   3   |       |       |
// 	                |       |       |       |       |       /*    */        |   0   |       |       |       |      
            bindings = <
	&trans		&trans		&trans		&trans		&trans		&trans			/**/			&trans		&trans		&trans		&trans		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans			/**/			&trans		&kp N7		&kp N8		&kp N9		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans			/**/			&trans		&kp N4		&kp N5		&kp N6		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans		&trans	/**/	&trans		&trans		&kp N1		&kp N2		&kp N3		&trans		&trans
					&trans		&trans		&trans		&trans		&trans	/**/	&trans		&kp N0		&trans		&trans		&trans
            >;
            sensor-bindings = <&inc_dec_kp C_NEXT C_PREV &inc_dec_kp C_VOL_UP C_VOL_DN>;
        };

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        config_layer {
// ---------------------------------------------------------------------------------------------------------------------
// 	| BTCLR | BT0   |  BT1  |  BT2  |  BT3  |  BT4  |       /*    */        | BTCLR | BT0   |  BT1  |  BT2  |  BT3  |  BT4  |
// 	|       |       |       |       |       |       |       /*    */        |       |       |       |       |       |       |
// 	|       |       |       |       |       |       |       /*    */        |       |       |       |       |       |       |
// 	|       |       |       |       |       |       |       /*    */        |       |       |       |       |       |       |
// 	                |       |       |       |       |       /*    */        |       |       |       |       |      
            bindings = <
	&bt BT_CLR	&bt BT_SEL 0	&bt BT_SEL 1	&bt BT_SEL 2	&bt BT_SEL 3	&bt BT_SEL 4		/**/			&bt BT_CLR	&bt BT_SEL 0	&bt BT_SEL 1	&bt BT_SEL 2	&bt BT_SEL 3	&trans
	&trans		&trans		&trans		&trans		&trans		&trans			/**/			&trans		&trans		&trans		&trans		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans			/**/			&trans		&trans		&trans		&trans		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans		&trans	/**/	&trans		&trans		&trans		&trans		&trans		&trans		&trans
					&trans		&trans		&trans		&trans		&trans	/**/	&trans		&trans		&trans		&trans		&trans
            >;
            sensor-bindings = <&inc_dec_kp C_NEXT C_PREV &inc_dec_kp C_VOL_UP C_VOL_DN>;
        };


// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        trans_layer {
// ---------------------------------------------------------------------------------------------------------------------
// 	|       |       |       |       |       |       |       /*    */        |       |       |       |       |       |       |
// 	|       |       |       |       |       |       |       /*    */        |       |       |       |       |       |       |
// 	|       |       |       |       |       |       |       /*    */        |       |       |       |       |       |       |
// 	|       |       |       |       |       |       |       /*    */        |       |       |       |       |       |       |
// 	                |       |       |       |       |       /*    */        |       |       |       |       |      
            bindings = <
	&trans		&trans		&trans		&trans		&trans		&trans			/**/			&trans		&trans		&trans		&trans		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans			/**/			&trans		&trans		&trans		&trans		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans			/**/			&trans		&trans		&trans		&trans		&trans		&trans
	&trans		&trans		&trans		&trans		&trans		&trans		&trans	/**/	&trans		&trans		&trans		&trans		&trans		&trans		&trans
					&trans		&trans		&trans		&trans		&trans	/**/	&trans		&trans		&trans		&trans		&trans
            >;
            sensor-bindings = <&inc_dec_kp C_NEXT C_PREV &inc_dec_kp C_VOL_UP C_VOL_DN>;
        };

    };
};
